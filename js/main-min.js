!function($){var e;$.getJSON("json/data.json",(function(n){e=n;for(var t=new ScrollMagic.Controller,s=e.length,o=0,r=0,i=0,a=0,d=0,l=0;l<e.length;l++)for(var c=e[l].questionAnswers,u=0;u<c.length;u++)c[u].answerIsTrue&&d++;function p(){$(".nb-correct").html(r),$(".nb-points").html(r),$(".nb-points-possibles").html(d),o===s&&$(".warning").fadeOut()}p(),function(e){var n=$("#question-template").html(),t=Handlebars.compile(n),s=e.map((function(n,t){return{...n,index:t,totalQuestions:e.length}})),o=t({question:s});$(".questions").prepend(o)}(e),$(".answer-unique").on("click",(function(){if(!$(this).closest(".question").hasClass("answered")){o+=1;var n=$(this).closest(".question").attr("id").replace("q",""),t=$(this).index(),r=e[n].questionAnswers[t].answerIsTrue,d=e[n].questionHint;r?($(this).addClass("correct"),d&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+d),i+=1):($(this).addClass("error"),$(this).closest(".question").find(".answer-unique").each((function(){e[n].questionAnswers[$(this).index()].answerIsTrue&&$(this).addClass("correct")})),d&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+d)),$(this).closest(".question").addClass("answered"),a=(100/s*i).toFixed(2),p()}})),$(".answer-unique-ponderation").on("click",(function(){if(!$(this).closest(".question").hasClass("answered")){o+=1;var n=$(this).closest(".question").attr("id").replace("q",""),t=$(this).index(),s=e[n].questionAnswers[t].answerScore,i=e[n].questionHint;r+=s,console.log(r),$(this).addClass("selected"),$(this).siblings().addClass("faded"),i&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+i),$(this).closest(".question").addClass("answered"),a=(2.5*r).toFixed(2),p()}})),$(".submit-dropdown-2").on("click",(function(){if(!$(this).parent().parent().hasClass("answered")){o+=1;var n=$(this).index(".submit-dropdown-2"),t=e[n].questionHint,d=e[n].questionAnswers,l=$.map(d,(function(e){if(e.answerIsTrue)return e.answerTxt})),c=l.join(" et ");c=c.toLowerCase(),console.log(c);var u=$(this).parent().find(".dropdown-a").val(),h=$(this).parent().find(".dropdown-b").val(),f=u+" et "+h;f=f.toLowerCase();var w=h+" et "+u;w=w.toLowerCase(),l.includes(u)?($(this).parent().find(".dropdown-a").addClass("correct"),$(this).parent().find(".dropdown-a").prop("disabled",!0),r+=1):($(this).parent().find(".dropdown-a").addClass("error"),$(this).parent().find(".dropdown-a").prop("disabled",!0)),l.includes(h)&&u!==h?($(this).parent().find(".dropdown-b").addClass("correct"),$(this).parent().find(".dropdown-b").prop("disabled",!0),r+=1):($(this).parent().find(".dropdown-b").addClass("error"),$(this).parent().find(".dropdown-b").prop("disabled",!0)),t&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+t),f===c||w===c?(i+=1,t&&$(this).closest(".question").find(".hint").html('<span class="correct-txt font-semibold underline decoration-2">Correct:</span> '+t)):t&&$(this).closest(".question").find(".hint").html('<span class="error-txt font-semibold underline decoration-2">Erreur:</span> '+t),$(this).parent().parent().addClass("answered"),a=(100/s*i).toFixed(2),p()}}));var h=$(".sumup"),f=$(".gauge"),w=f.find(".gauge-cursor"),m=f.find(".gauge-bg"),g=h.find(".nb-results"),b=h.find(".percent-results"),q=h.find(".points-results"),x=h.find(".final-text"),C=h.find(".btn-redo"),A=h.find(".btn-shar");(new TimelineMax).set(h,{autoAlpha:.3,transformOrigin:"center center"}).set(m,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(w,{autoAlpha:0,y:"-=20px",transformOrigin:"center center"}).set(g,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(b,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(q,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(x,{autoAlpha:0,transformOrigin:"center center"}).set(C,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(A,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"});var O=!1;function y(){$(".nb-correct").counterUp({delay:10,time:1e3})}function v(){$(".percent-correct").counterUp({delay:10,time:1e3})}new ScrollMagic.Scene({triggerElement:".gauge"}).on("enter",(function(e){o===s&&(0==O&&(100==a&&(a=95),new TimelineMax({paused:!0}).to(h,.3,{autoAlpha:1,ease:Power4.easeInOut}).to(m,1,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).to(w,.5,{autoAlpha:1,y:"+=20px",ease:Power4.easeInOut,onComplete:y},"-=0.5").to(g,.3,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).to(w,2,{left:a+"%",ease:Power4.easeInOut,onComplete:v}).to(x,.3,{autoAlpha:1,ease:Power4.easeInOut},"+=0.25").to(C,.7,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut},"+=1.7").to(A,.7,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).play(),O=!0))})).triggerHook(.6).addTo(t),$(".btn-shar").on("click",(function(){$(".aside-r-toggle").click()}))})).fail((function(e,n,t){console.error("No quiz data found",n,t)})),window.scrollTo(0,0),setTimeout((function(){$("body").addClass("is-visible")}),1e3),Handlebars.registerHelper("indexFormatter",(function(e){return e+1})),Handlebars.registerHelper("isEqual",(function(e,n,t){return e===n?t.fn(this):t.inverse(this)}))}(jQuery);